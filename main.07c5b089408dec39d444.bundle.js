(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{19:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"login",function(){return h}),n.d(r,"logout",function(){return b});var o=n(7),a="session/LOGIN",c="session/LOGOUT";var u,i=n(4),l=n(31),s=n.n(l);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=localStorage.getItem("user"),d=p?{loggedIn:!0,user:p}:{},m=Object(i.b)(d)((f(u={},a,function(e,t){return{loggedIn:!1,user:"progress"}}),f(u,"session/LOGIN_COMPLETED",function(e,t){var n,r=t.payload.id_token;if(r){n=t.payload.id_token,localStorage.setItem("user",n);var o=s()(r).auth.trim().split(","),a=0;for(a=0;a<o.length;a++){if("ROLE_ADMIN"===o[a]){i.d.push("/administrator/home");break}if("ROLE_TEACHER"===o[a]){i.d.push("/teacher/home");break}if("ROLE_PARENTS"===o[a]){i.d.push("/parents/home");break}if("ROLE_STUDENT"===o[a]){i.d.push("/student/home");break}}e={loggedIn:!0,user:t.payload.id_token}}return e}),f(u,"session/LOGIN_FAILED",function(e,t){return{loggedIn:!1,user:"Login failed"}}),f(u,c,function(e,t){return localStorage.removeItem("user"),i.d.push("/auth/login?logout=success"),{}}),u)),y=Object(o.c)({isAuthenticated:m}),h=function(e,t,n){return{type:a,meta:{async:!0,blocking:!0,path:"/authenticate",method:"POST",body:{username:e,password:t,rememberMe:n}}}},b=function(){return{type:c}};n.d(t,"b",function(){return r});t.a=y},27:function(e,t,n){e.exports={wrapper:"wrapper_1uQAK1c"}},4:function(e,t,n){"use strict";var r=function(o){return function(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o,t=1<arguments.length?arguments[1]:void 0,n=r[t.type];return n?n(e,t):e}}},o=n(28),a=n.n(o),c=function(e,t,n){var r,o={method:t,headers:(r=localStorage.getItem("user"),r?{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r}:{Accept:"application/json","Content-Type":"application/json"}),body:"GET"!==t?JSON.stringify(n):null};return a()(e,o).then(function(e){return r=e.status,o=e.json(),new Promise(function(t,n){200<=r&&r<300?o.then(function(e){return t(e)}):(localStorage.removeItem("user"),o.then(function(e){return n({status:r,response:e})}))});var r,o})};var u=n(6),i=Object(u.a)({forceRefresh:!0}),l=n(1),s=n.n(l),f=n(32),p=n(66);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=function(e){var t=e.component,n=m(e,["component"]);return s.a.createElement(f.a,d({},n,{render:function(e){return localStorage.getItem("user")?s.a.createElement(t,e):s.a.createElement(p.a,{to:{pathname:"/auth/login",state:{from:e.location}}})}}))};n.d(t,"b",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return y})},60:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"session",function(){return k.a});var c=a(1),u=a.n(c),r=a(26),o=a.n(r),i=a(27),l=a.n(i),s=a(67),f=a(32),p=a(66),d=a(4);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,b(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,c["Component"]),n=t,(r=[{key:"authenticate",value:function(){return new Promise(function(e){return setTimeout(e,2e3)})}},{key:"componentDidMount",value:function(){this.authenticate().then(function(){var e=document.getElementById("ipl-progress-indicator");e&&(e.classList.add("available"),setTimeout(function(){e.outerHTML=""},2e3))})}},{key:"render",value:function(){return u.a.createElement("div",{className:"".concat(l.a.wrapper)},u.a.createElement(c.Suspense,{fallback:""},u.a.createElement(s.a,null,u.a.createElement(f.a,{exact:!0,path:"/",render:function(){return u.a.createElement(p.a,{to:"/auth/login"})}}),u.a.createElement(f.a,{exact:!0,path:"/auth",render:function(){return u.a.createElement(p.a,{to:"/auth/login"})}}),u.a.createElement(f.a,{exact:!0,path:"/auth/login",component:u.a.lazy(function(){return Promise.all([a.e(0),a.e(4)]).then(a.bind(null,102))})}),u.a.createElement(f.a,{exact:!0,path:"/administrator",render:function(){return u.a.createElement(p.a,{to:"/administrator/home"})}}),u.a.createElement(d.a,{path:"/administrator",component:u.a.lazy(function(){return Promise.all([a.e(0),a.e(3)]).then(a.bind(null,101))})}))))}}])&&y(n.prototype,r),o&&y(n,o),t}(),E=a(65),O=a(20),w=(a(43),a(44),a(7)),j=a(30),k=a(19);var I=function(){return function(i){return function(r){var e=i(r);if(!r.meta||!r.meta.async)return e;var t=r.meta,n=t.path,o=t.method,a=void 0===o?"GET":o,c=t.body;if(!n)throw new Error("'path' not specified for async action ".concat(r.type));var u="".concat("http://localhost:8080/api").concat(n);return Object(d.c)(u,a,c).then(function(e){return t=e,i({type:"".concat((n=r).type,"_COMPLETED"),payload:t,meta:n.meta}),t;var t,n},function(e){return t=e,i({type:"".concat((n=r).type,"_FAILED"),payload:t,meta:n.meta}),Promise.reject(t);var t,n})}}},_=["background: blue","color: white"].join(";"),S=(["background: green","color: white"].join(";"),["background: darkorange","color: white"].join(";"),["background: red","color: white"].join(";"),function(){var c=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return function(a){return function(o){return function(e){if(!c)return o(e);var t=a.getState(),n=o(e),r=a.getState();return function(){("function"==typeof console.groupCollapsed?console.groupCollapsed:console.info).apply(void 0,arguments)}("%c ".concat(e.type," "),function(e){if(!e.meta||!e.meta.async)return _}(e)),T("%cprev state","color: darkorange",t),T("%caction payload","color: blue",e.payload),T("%cnext state","color: darkgreen",r),function(){("function"==typeof console.groupEnd?console.groupEnd:console.info).apply(void 0,arguments)}(),n}}}});function T(){var e;(e=console).info.apply(e,arguments)}var P,L,A=(P=window.REDUX_INITIAL_DATA,L=Object(w.c)(n),Object(w.d)(L,P,Object(w.a)(I,j.a,S(!0))));o.a.render(u.a.createElement(O.a,{store:A},u.a.createElement(E.a,{history:d.d},u.a.createElement(v,null))),document.getElementById("t"))}},[[60,2,0]]]);